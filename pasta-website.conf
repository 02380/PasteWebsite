<VirtualHost *:80>

        ServerName pasta.quphoria.co.uk

        ServerAdmin quphoria.dev@gmail.com
        DocumentRoot /home/owner/webapps/pasta/website

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>

RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^(.*) https://%{HTTP_HOST}/$1

<IfModule mod_ssl.c>
        <VirtualHost _default_:443>
                ServerName pasta.quphoria.co.uk

                ServerAdmin quphoria.dev@gmail.com

                DocumentRoot /home/owner/webapps/pasta/website

                # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
                # error, crit, alert, emerg.
                # It is also possible to configure the loglevel for particular
                # modules, e.g.
                #LogLevel info ssl:warn

                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined

                ProxyPass /api/ http://127.0.0.1:5000
                ProxyPassReverse /api/ http://127.0.0.1:5000

                SSLEngine on

                SSLCertificateFile      /etc/ssl/quphoria/fullchain.cer
                SSLCertificateKeyFile   /etc/ssl/quphoria/quphoria.co.uk.key

        </VirtualHost>
</IfModule>